local Library = {}

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

function Library:CreateWindow(config)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = config and config.Name or "CustomUILibrary"
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = CoreGui

    local Frame = Instance.new("Frame")
    Frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Frame.BorderSizePixel = 0
    Frame.AnchorPoint = Vector2.new(0.5, 0.5)
    Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    Frame.Size = UDim2.new(0, 808, 0, 577)
    Frame.Parent = ScreenGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 13)
    UICorner.Parent = Frame

    local UIStroke = Instance.new("UIStroke")
    UIStroke.Color = Color3.fromRGB(255, 255, 255)
    UIStroke.Thickness = 3
    UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke.Parent = Frame

    local Title = Instance.new("TextLabel")
    Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Title.BorderSizePixel = 0
    Title.Size = UDim2.new(1, 0, 0, 57)
    Title.Font = Enum.Font.SourceSansBold
    Title.Text = config and config.Title or "Library Window"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextSize = 17
    Title.Parent = Frame

    local UICorner2 = Instance.new("UICorner")
    UICorner2.CornerRadius = UDim.new(0, 13)
    UICorner2.Parent = Title

    local TabsFrame = Instance.new("Frame")
    TabsFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TabsFrame.BorderSizePixel = 0
    TabsFrame.Position = UDim2.new(0, 0, 0, 57)
    TabsFrame.Size = UDim2.new(0, 128, 1, -57)
    TabsFrame.Parent = Frame

    local UICorner3 = Instance.new("UICorner")
    UICorner3.CornerRadius = UDim.new(0, 13)
    UICorner3.Parent = TabsFrame

    local UIStroke2 = Instance.new("UIStroke")
    UIStroke2.Color = Color3.fromRGB(255, 255, 255)
    UIStroke2.Thickness = 3
    UIStroke2.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke2.Parent = TabsFrame

    local TabsLabel = Instance.new("TextLabel")
    TabsLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TabsLabel.BorderSizePixel = 0
    TabsLabel.Size = UDim2.new(1, 0, 0, 25)
    TabsLabel.Font = Enum.Font.SourceSansBold
    TabsLabel.Text = "Tabs"
    TabsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TabsLabel.TextSize = 14
    TabsLabel.Parent = TabsFrame

    local UICorner4 = Instance.new("UICorner")
    UICorner4.CornerRadius = UDim.new(0, 13)
    UICorner4.Parent = TabsLabel

    local TabsList = Instance.new("ScrollingFrame")
    TabsList.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TabsList.BorderSizePixel = 0
    TabsList.Position = UDim2.new(0, 0, 0, 25)
    TabsList.Size = UDim2.new(1, 0, 1, -25)
    TabsList.ScrollBarThickness = 4
    TabsList.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabsList.AutomaticCanvasSize = Enum.AutomaticSize.Y
    TabsList.Parent = TabsFrame

    local UICorner5 = Instance.new("UICorner")
    UICorner5.CornerRadius = UDim.new(0, 13)
    UICorner5.Parent = TabsList

    local UIStroke3 = Instance.new("UIStroke")
    UIStroke3.Color = Color3.fromRGB(255, 255, 255)
    UIStroke3.Thickness = 3
    UIStroke3.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke3.Parent = TabsList

    local PagesFrame = Instance.new("Frame")
    PagesFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    PagesFrame.BorderSizePixel = 0
    PagesFrame.Position = UDim2.new(0, 128, 0, 57)
    PagesFrame.Size = UDim2.new(1, -128, 1, -57)
    PagesFrame.Parent = Frame

    local UICorner6 = Instance.new("UICorner")
    UICorner6.CornerRadius = UDim.new(0, 13)
    UICorner6.Parent = PagesFrame

    local UIStroke4 = Instance.new("UIStroke")
    UIStroke4.Color = Color3.fromRGB(255, 255, 255)
    UIStroke4.Thickness = 3
    UIStroke4.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke4.Parent = PagesFrame

    local Tabs = {}

    local Window = {}

    function Window:AddTab(name)
        local TabButton = Instance.new("TextButton")
        TabButton.Size = UDim2.new(1, -10, 0, 30)
        TabButton.Position = UDim2.new(0, 5, 0, (#Tabs * 35))
        TabButton.Text = name
        TabButton.Font = Enum.Font.SourceSansBold
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.TextSize = 14
        TabButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TabButton.Parent = TabsList

        local Page = Instance.new("ScrollingFrame")
        Page.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
        Page.BorderSizePixel = 0
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.ScrollBarThickness = 8
        Page.CanvasSize = UDim2.new(0, 0, 0, 0)
        Page.AutomaticCanvasSize = Enum.AutomaticSize.Y
        Page.Visible = #Tabs == 0
        Page.Parent = PagesFrame

        local ElementsLayout = Instance.new("UIListLayout")
        ElementsLayout.Padding = UDim.new(0, 5)
        ElementsLayout.Parent = Page

        for _, other in ipairs(PagesFrame:GetChildren()) do
            if other:IsA("ScrollingFrame") and other ~= Page then
                other.Visible = false
            end
        end

        TabButton.MouseButton1Click:Connect(function()
            for _, other in ipairs(PagesFrame:GetChildren()) do
                if other:IsA("ScrollingFrame") then
                    other.Visible = false
                end
            end
            Page.Visible = true
        end)

        local Tab = {}

        function Tab:AddButton(text, callback)
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, -10, 0, 30)
            Button.Text = text
            Button.Font = Enum.Font.SourceSansBold
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14
            Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            Button.Parent = Page
            Button.MouseButton1Click:Connect(function()
                if callback then
                    callback()
                end
            end)
        end

        function Tab:AddToggle(text, callback)
            local Toggle = Instance.new("TextButton")
            Toggle.Size = UDim2.new(1, -10, 0, 30)
            Toggle.Text = text .. ": Off"
            Toggle.Font = Enum.Font.SourceSansBold
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
            Toggle.TextSize = 14
            Toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            Toggle.Parent = Page

            local state = false
            Toggle.MouseButton1Click:Connect(function()
                state = not state
                Toggle.Text = text .. (state and ": On" or ": Off")
                if callback then
                    callback(state)
                end
            end)
        end

        function Tab:AddSlider(text, min, max, callback)
            local Holder = Instance.new("Frame")
            Holder.Size = UDim2.new(1, -10, 0, 30)
            Holder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            Holder.Parent = Page

            local Label = Instance.new("TextLabel")
            Label.Size = UDim2.new(0.5, 0, 1, 0)
            Label.Text = text .. ": " .. tostring(min)
            Label.Font = Enum.Font.SourceSansBold
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.BackgroundTransparency = 1
            Label.Parent = Holder

            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(0.5, 0, 1, 0)
            Button.Position = UDim2.new(0.5, 0, 0, 0)
            Button.Text = "Change"
            Button.Font = Enum.Font.SourceSansBold
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14
            Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            Button.Parent = Holder

            local value = min
            Button.MouseButton1Click:Connect(function()
                value = value + 1
                if value > max then
                    value = min
                end
                Label.Text = text .. ": " .. tostring(value)
                if callback then
                    callback(value)
                end
            end)
        end

        function Tab:AddInput(text, callback)
            local Box = Instance.new("TextBox")
            Box.Size = UDim2.new(1, -10, 0, 30)
            Box.PlaceholderText = text
            Box.Text = ""
            Box.Font = Enum.Font.SourceSansBold
            Box.TextColor3 = Color3.fromRGB(255, 255, 255)
            Box.TextSize = 14
            Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            Box.Parent = Page
            Box.FocusLost:Connect(function()
                if callback then
                    callback(Box.Text)
                end
            end)
        end

        table.insert(Tabs, Tab)
        return Tab
    end

    return Window
end

return Library